<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Form Pelanggan – Siap Print</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* ---------- Layout umum ---------- */
        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 0;
            background: #f9f9f9;
        }
        .container {
            max-width: 800px;
            margin: 2rem auto;
            background: #fff;
            padding: 1.5rem;
            box-shadow: 0 0 10px rgba(0,0,0,.1);
        }

        h1, h2 {
            text-align: center;
            margin-bottom: .5rem;
        }

        /* ---------- Form styling ---------- */
        form {
            display: grid;
            gap: 1rem;
        }

        label {
            font-weight: 600;
        }

        input,select,textarea {
            width: 100%;
            padding: .5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
        }

        .grid-2 {
            display: grid;
            gap: 1rem;
        }
        .grid-2 > div {
            display: flex;
            flex-direction: column;
        }

        /* ---------- Tombol ---------- */
        .actions {
            text-align: right;
            margin-top: 1rem;
        }
        .actions button {
            background: #28a745;
            color: #fff;
            border: none;
            padding: .6rem 1.2rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }
        .actions button:hover {
            background: #218838;
        }

        /* ---------- Print styling ---------- */
        @media print {
            /* Hide everything that is not needed in the printout */
            .actions, .no-print { display: none; }

            body {
                background: #fff;
                margin: 0;
            }
            .container {
                box-shadow: none;
                margin: 0;
                padding: 0;
                width: 100%;
            }
            form {
                gap: .5rem;
            }
            input, select, textarea {
                border: none;
                background: transparent;
                font-size: 12pt;
                width: auto;
            }
            /* Force page break after each filled form (jika ada banyak) */
            .page-break {
                page-break-after: always;
            }
        }
    </style>
</head>
<body>

<div class="container no-print">
    <h1>Form pelanggan – data pengiriman</h1>
    <p class="text-center text-muted">Isi data di bawah ini, lalu klik <strong>Simpan & Cetak</strong> untuk menghasilkan laporan yang siap diprint.</p>

    <form id="orderForm">
        <div class="grid-2">
            <div>
                <label for="nama">Nama Pelanggan *</label>
                <input type="text" id="nama" name="nama" required>
            </div>
            <div>
                <label for="alamat">Alamat *</label>
                <textarea id="alamat" name="alamat" rows="3" required></textarea>
            </div>
            <div>
                <label for="telepon">No. Telepon</label>
                <input type="tel" id="telepon" name="telepon">
            </div>
            <div>
                <label for="email">Email</label>
                <input type="email" id="email" name="email">
            </div>
        </div>

        <div class="grid-2">
            <div>
                <label for="item">Produk / Barang *</label>
                <select id="item" name="item" required>
                    <option value="" disabled selected>Pilih Produk</option>
                    <option>Sepatu Sneakers</option>
                    <option>Bagasi Canvas</option>
                    <option>Boneka Anak</option>
                    <option>Laptop Gaming</option>
                </select>
            </div>
            <div>
                <label for="qty">Jumlah</label>
                <input type="number" id="qty" name="qty" min="1" value="1">
            </div>
            <div>
                <label for="tanggal">Tanggal Pengiriman</label>
                <input type="date" id="tanggal" name="tanggal">
            </div>
            <div>
                <label for="catatan">Catatan Khusus</label>
                <textarea id="catatan" name="catatan" rows="2"></textarea>
            </div>
        </div>

        <div class="actions">
            <!-- The print button – also triggers a tiny script to insert the collected data into a printable view -->
            <button type="button" class="btn-print no-print" onclick="printForm()">Simpan & Cetak</button>
        </div>
    </form>
</div>

<!-- Printable preview (will be hidden on screen, only shown when printing) -->
<div class="print-area" style="display:none;">
    <h2>Data Pengiriman – <?php echo date('d F Y'); ?></h2>
    <hr>
    <table style="width:100%; border-collapse:collapse;">
        <tr>
            <td><strong>Nama Pelanggan :</strong></td>
            <td style="width:20%;"></td>
            <td id="print-nama"></td>
        </tr>
        <tr>
            <td><strong>Alamat :</strong></td>
            <td></td>
            <td id="print-alamat"></td>
        </tr>
        <tr>
            <td><strong>Telepon :</strong></td>
            <td></td>
            <td id="print-telepon"></td>
        </tr>
        <tr>
            <td><strong>Email :</strong></td>
            <td></td>
            <td id="print-email"></td>
        </tr>
        <tr>
            <td><strong>Produk :</strong></td>
            <td></td>
            <td id="print-item"></td>
        </tr>
        <tr>
            <td><strong>Jumlah :</strong></td>
            <td></td>
            <td id="print-qty"></td>
        </tr>
        <tr>
            <td><strong>Tanggal Pengiriman :</strong></td>
            <td></td>
            <td id="print-tanggal"></td>
        </tr>
        <tr>
            <td><strong>Catatan :</strong></td>
            <td></td>
            <td id="print-catatan"></td>
        </tr>
    </table>
    <button onclick="window.print()" style="margin-top:1rem;">Cetak Lagi</button>
</div>

<script>
    // Helper: populate the hidden printable area with the filled values
    function populatePrintArea() {
        const f = document.getElementById('orderForm');

        document.getElementById('print-nama').textContent      = f.nama.value.trim()      || '-';
        document.getElementById('print-alamat').textContent    = f.alamat.value.trim()    || '-';
        document.getElementById('print-telepon').textContent   = f.telepon.value.trim()   || '-';
        document.getElementById('print-email').textContent     = f.email.value.trim()     || '-';
        document.getElementById('print-item').textContent      = f.item.value.trim()      || '-';
        document.getElementById('print-qty').textContent       = f.qty.value.trim()       || '-';
        document.getElementById('print-tanggal').textContent   = f.tanggal.value.trim()   || '-';
        document.getElementById('print-catatan').textContent   = f.catatan.value.trim()   || '-';
    }

    // Show printable area and trigger window.print()
    function printForm() {
        populatePrintArea();
        // If you want to keep the form data saved locally, uncomment the line below:
        // localStorage.setItem('lastOrder', JSON.stringify(Object.fromEntries(new FormData(f))));
        window.print();
    }

    // OPTIONAL: restore last filled data when page reloads (localStorage)
    window.addEventListener('DOMContentLoaded', () => {
        const stored = localStorage.getItem('lastOrder');
        if (stored) {
            const data = JSON.parse(stored);
            for (const key in data) {
                const el = document.querySelector(`#${key}`);
                if (el) el.value = data[key];
            }
        }
    });
</script>

</body>
</html>
